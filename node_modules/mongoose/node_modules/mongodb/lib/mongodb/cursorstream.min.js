var Stream=require("stream").Stream;function CursorStream(a){if(!(this instanceof CursorStream)){return new CursorStream(a)}Stream.call(this);this.readable=true;this.paused=false;this._cursor=a;this._destroyed=null;var b=this;process.nextTick(function(){b._init()})}CursorStream.prototype.__proto__=Stream.prototype;CursorStream.prototype.readable;CursorStream.prototype.paused;CursorStream.prototype._init=function(){if(this._destroyed){return}this._next()};CursorStream.prototype._next=function(){if(this.paused||this._destroyed){return}var a=this;process.nextTick(function(){a._cursor.nextObject(function(c,b){a._onNextObject(c,b)})})};CursorStream.prototype._onNextObject=function(b,a){if(b){return this.destroy(b)}if(!a){return this.destroy()}this.emit("data",a);this._next()};CursorStream.prototype.pause=function(){this.paused=true};CursorStream.prototype.resume=function(){this.paused=false;this._next()};CursorStream.prototype.destroy=function(a){if(this._destroyed){return}this._destroyed=true;this.readable=false;this._cursor.close();if(a){this.emit("error",a)}this.emit("close")};module.exports=exports=CursorStream;