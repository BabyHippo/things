function Timestamp(b,a){if(!(this instanceof Timestamp)){return new Timestamp(b,a)}this._bsontype="Timestamp";this.low_=b|0;this.high_=a|0}Timestamp.prototype.toInt=function(){return this.low_};Timestamp.prototype.toNumber=function(){return this.high_*Timestamp.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()};Timestamp.prototype.toJSON=function(){return this.toString()};Timestamp.prototype.toString=function(d){var e=d||10;if(e<2||36<e){throw Error("radix out of range: "+e)}if(this.isZero()){return"0"}if(this.isNegative()){if(this.equals(Timestamp.MIN_VALUE)){var f=Timestamp.fromNumber(e);var b=this.div(f);var h=b.multiply(f).subtract(this);return b.toString(e)+h.toInt().toString(e)}else{return"-"+this.negate().toString(e)}}var g=Timestamp.fromNumber(Math.pow(e,6));var h=this;var j="";while(true){var i=h.div(g);var c=h.subtract(i.multiply(g)).toInt();var a=c.toString(e);h=i;if(h.isZero()){return a+j}else{while(a.length<6){a="0"+a}j=""+a+j}}};Timestamp.prototype.getHighBits=function(){return this.high_};Timestamp.prototype.getLowBits=function(){return this.low_};Timestamp.prototype.getLowBitsUnsigned=function(){return(this.low_>=0)?this.low_:Timestamp.TWO_PWR_32_DBL_+this.low_};Timestamp.prototype.getNumBitsAbs=function(){if(this.isNegative()){if(this.equals(Timestamp.MIN_VALUE)){return 64}else{return this.negate().getNumBitsAbs()}}else{var b=this.high_!=0?this.high_:this.low_;for(var a=31;a>0;a--){if((b&(1<<a))!=0){break}}return this.high_!=0?a+33:a+1}};Timestamp.prototype.isZero=function(){return this.high_==0&&this.low_==0};Timestamp.prototype.isNegative=function(){return this.high_<0};Timestamp.prototype.isOdd=function(){return(this.low_&1)==1};Timestamp.prototype.equals=function(a){return(this.high_==a.high_)&&(this.low_==a.low_)};Timestamp.prototype.notEquals=function(a){return(this.high_!=a.high_)||(this.low_!=a.low_)};Timestamp.prototype.lessThan=function(a){return this.compare(a)<0};Timestamp.prototype.lessThanOrEqual=function(a){return this.compare(a)<=0};Timestamp.prototype.greaterThan=function(a){return this.compare(a)>0};Timestamp.prototype.greaterThanOrEqual=function(a){return this.compare(a)>=0};Timestamp.prototype.compare=function(a){if(this.equals(a)){return 0}var c=this.isNegative();var b=a.isNegative();if(c&&!b){return -1}if(!c&&b){return 1}if(this.subtract(a).isNegative()){return -1}else{return 1}};Timestamp.prototype.negate=function(){if(this.equals(Timestamp.MIN_VALUE)){return Timestamp.MIN_VALUE}else{return this.not().add(Timestamp.ONE)}};Timestamp.prototype.add=function(m){var d=this.high_>>>16;var c=this.high_&65535;var b=this.low_>>>16;var a=this.low_&65535;var h=m.high_>>>16;var g=m.high_&65535;var f=m.low_>>>16;var e=m.low_&65535;var l=0,k=0,j=0,i=0;i+=a+e;j+=i>>>16;i&=65535;j+=b+f;k+=j>>>16;j&=65535;k+=c+g;l+=k>>>16;k&=65535;l+=d+h;l&=65535;return Timestamp.fromBits((j<<16)|i,(l<<16)|k)};Timestamp.prototype.subtract=function(a){return this.add(a.negate())};Timestamp.prototype.multiply=function(m){if(this.isZero()){return Timestamp.ZERO}else{if(m.isZero()){return Timestamp.ZERO}}if(this.equals(Timestamp.MIN_VALUE)){return m.isOdd()?Timestamp.MIN_VALUE:Timestamp.ZERO}else{if(m.equals(Timestamp.MIN_VALUE)){return this.isOdd()?Timestamp.MIN_VALUE:Timestamp.ZERO}}if(this.isNegative()){if(m.isNegative()){return this.negate().multiply(m.negate())}else{return this.negate().multiply(m).negate()}}else{if(m.isNegative()){return this.multiply(m.negate()).negate()}}if(this.lessThan(Timestamp.TWO_PWR_24_)&&m.lessThan(Timestamp.TWO_PWR_24_)){return Timestamp.fromNumber(this.toNumber()*m.toNumber())}var d=this.high_>>>16;var c=this.high_&65535;var b=this.low_>>>16;var a=this.low_&65535;var h=m.high_>>>16;var g=m.high_&65535;var f=m.low_>>>16;var e=m.low_&65535;var l=0,k=0,j=0,i=0;i+=a*e;j+=i>>>16;i&=65535;j+=b*e;k+=j>>>16;j&=65535;j+=a*f;k+=j>>>16;j&=65535;k+=c*e;l+=k>>>16;k&=65535;k+=b*f;l+=k>>>16;k&=65535;k+=a*g;l+=k>>>16;k&=65535;l+=d*e+c*f+b*g+a*h;l&=65535;return Timestamp.fromBits((j<<16)|i,(l<<16)|k)};Timestamp.prototype.div=function(g){if(g.isZero()){throw Error("division by zero")}else{if(this.isZero()){return Timestamp.ZERO}}if(this.equals(Timestamp.MIN_VALUE)){if(g.equals(Timestamp.ONE)||g.equals(Timestamp.NEG_ONE)){return Timestamp.MIN_VALUE}else{if(g.equals(Timestamp.MIN_VALUE)){return Timestamp.ONE}else{var e=this.shiftRight(1);var a=e.div(g).shiftLeft(1);if(a.equals(Timestamp.ZERO)){return g.isNegative()?Timestamp.ONE:Timestamp.NEG_ONE}else{var h=this.subtract(g.multiply(a));var j=a.add(h.div(g));return j}}}}else{if(g.equals(Timestamp.MIN_VALUE)){return Timestamp.ZERO}}if(this.isNegative()){if(g.isNegative()){return this.negate().div(g.negate())}else{return this.negate().div(g).negate()}}else{if(g.isNegative()){return this.div(g.negate()).negate()}}var i=Timestamp.ZERO;var h=this;while(h.greaterThanOrEqual(g)){var a=Math.max(1,Math.floor(h.toNumber()/g.toNumber()));var f=Math.ceil(Math.log(a)/Math.LN2);var d=(f<=48)?1:Math.pow(2,f-48);var c=Timestamp.fromNumber(a);var b=c.multiply(g);while(b.isNegative()||b.greaterThan(h)){a-=d;c=Timestamp.fromNumber(a);b=c.multiply(g)}if(c.isZero()){c=Timestamp.ONE}i=i.add(c);h=h.subtract(b)}return i};Timestamp.prototype.modulo=function(a){return this.subtract(this.div(a).multiply(a))};Timestamp.prototype.not=function(){return Timestamp.fromBits(~this.low_,~this.high_)};Timestamp.prototype.and=function(a){return Timestamp.fromBits(this.low_&a.low_,this.high_&a.high_)};Timestamp.prototype.or=function(a){return Timestamp.fromBits(this.low_|a.low_,this.high_|a.high_)};Timestamp.prototype.xor=function(a){return Timestamp.fromBits(this.low_^a.low_,this.high_^a.high_)};Timestamp.prototype.shiftLeft=function(c){c&=63;if(c==0){return this}else{var b=this.low_;if(c<32){var a=this.high_;return Timestamp.fromBits(b<<c,(a<<c)|(b>>>(32-c)))}else{return Timestamp.fromBits(0,b<<(c-32))}}};Timestamp.prototype.shiftRight=function(c){c&=63;if(c==0){return this}else{var a=this.high_;if(c<32){var b=this.low_;return Timestamp.fromBits((b>>>c)|(a<<(32-c)),a>>c)}else{return Timestamp.fromBits(a>>(c-32),a>=0?0:-1)}}};Timestamp.prototype.shiftRightUnsigned=function(c){c&=63;if(c==0){return this}else{var a=this.high_;if(c<32){var b=this.low_;return Timestamp.fromBits((b>>>c)|(a<<(32-c)),a>>>c)}else{if(c==32){return Timestamp.fromBits(a,0)}else{return Timestamp.fromBits(a>>>(c-32),0)}}}};Timestamp.fromInt=function(c){if(-128<=c&&c<128){var a=Timestamp.INT_CACHE_[c];if(a){return a}}var b=new Timestamp(c|0,c<0?-1:0);if(-128<=c&&c<128){Timestamp.INT_CACHE_[c]=b}return b};Timestamp.fromNumber=function(a){if(isNaN(a)||!isFinite(a)){return Timestamp.ZERO}else{if(a<=-Timestamp.TWO_PWR_63_DBL_){return Timestamp.MIN_VALUE}else{if(a+1>=Timestamp.TWO_PWR_63_DBL_){return Timestamp.MAX_VALUE}else{if(a<0){return Timestamp.fromNumber(-a).negate()}else{return new Timestamp((a%Timestamp.TWO_PWR_32_DBL_)|0,(a/Timestamp.TWO_PWR_32_DBL_)|0)}}}}};Timestamp.fromBits=function(b,a){return new Timestamp(b,a)};Timestamp.fromString=function(h,b){if(h.length==0){throw Error("number format error: empty string")}var d=b||10;if(d<2||36<d){throw Error("radix out of range: "+d)}if(h.charAt(0)=="-"){return Timestamp.fromString(h.substring(1),d).negate()}else{if(h.indexOf("-")>=0){throw Error('number format error: interior "-" character: '+h)}}var e=Timestamp.fromNumber(Math.pow(d,8));var f=Timestamp.ZERO;for(var a=0;a<h.length;a+=8){var g=Math.min(8,h.length-a);var j=parseInt(h.substring(a,a+g),d);if(g<8){var c=Timestamp.fromNumber(Math.pow(d,g));f=f.multiply(c).add(Timestamp.fromNumber(j))}else{f=f.multiply(e);f=f.add(Timestamp.fromNumber(j))}}return f};Timestamp.INT_CACHE_={};Timestamp.TWO_PWR_16_DBL_=1<<16;Timestamp.TWO_PWR_24_DBL_=1<<24;Timestamp.TWO_PWR_32_DBL_=Timestamp.TWO_PWR_16_DBL_*Timestamp.TWO_PWR_16_DBL_;Timestamp.TWO_PWR_31_DBL_=Timestamp.TWO_PWR_32_DBL_/2;Timestamp.TWO_PWR_48_DBL_=Timestamp.TWO_PWR_32_DBL_*Timestamp.TWO_PWR_16_DBL_;Timestamp.TWO_PWR_64_DBL_=Timestamp.TWO_PWR_32_DBL_*Timestamp.TWO_PWR_32_DBL_;Timestamp.TWO_PWR_63_DBL_=Timestamp.TWO_PWR_64_DBL_/2;Timestamp.ZERO=Timestamp.fromInt(0);Timestamp.ONE=Timestamp.fromInt(1);Timestamp.NEG_ONE=Timestamp.fromInt(-1);Timestamp.MAX_VALUE=Timestamp.fromBits(4294967295|0,2147483647|0);Timestamp.MIN_VALUE=Timestamp.fromBits(0,2147483648|0);Timestamp.TWO_PWR_24_=Timestamp.fromInt(1<<24);if(typeof window==="undefined"){exports.Timestamp=Timestamp};