/*
 * Module dependencies.
 */
var Document=require("../document"),inspect=require("util").inspect;function EmbeddedDocument(a,b,d){if(b){this.__parentArray=b;this.__parent=b._parent}else{this.__parentArray=undefined;this.__parent=undefined}Document.call(this,a,undefined,d);var c=this;this.on("isNew",function(e){c.isNew=e})}
/*
 * Inherit from Document
 */
EmbeddedDocument.prototype.__proto__=Document.prototype;EmbeddedDocument.prototype.markModified=function(a){if(!this.__parentArray){return}this._activePaths.modify(a);if(this.isNew){this.__parentArray._markModified()}else{this.__parentArray._markModified(this,a)}};EmbeddedDocument.prototype.commit=EmbeddedDocument.markModified;EmbeddedDocument.prototype.save=function(a){if(a){a(null)}return this};EmbeddedDocument.prototype.remove=function(b){if(!this.__parentArray){return this}var a;if(!this.willRemove){a=this._doc._id;if(!a){throw new Error("For your own good, Mongoose does not know how to remove an EmbeddedDocument that has no _id")}this.__parentArray.pull({_id:a});this.willRemove=true}if(b){b(null)}return this};EmbeddedDocument.prototype.inspect=function(){return inspect(this.toObject())};EmbeddedDocument.prototype.invalidate=function(e,a){if(!this.__parent){return false}var c=this.__parentArray.indexOf(this);var d=this.__parentArray._path;var b=[d,c,e].join(".");this.__parent.invalidate(b,a);return true}
/*
 * Module exports.
 */
;module.exports=EmbeddedDocument;