/*
 * Module dependencies.
 */
var util=require("./utils");var EventEmitter=util.EventEmitter;function Promise(a){this.emitted={};if("function"==typeof a){this.addBack(a)}}
/*
 * Inherits from EventEmitter.
 */
Promise.prototype.__proto__=EventEmitter.prototype;Promise.prototype.on=function(b,a){if(this.emitted[b]){a.apply(this,this.emitted[b])}else{EventEmitter.prototype.on.call(this,b,a)}return this};Promise.prototype.emit=function(a){if(a=="err"||a=="complete"){if(this.emitted.err||this.emitted.complete){return this}this.emitted[a]=util.args(arguments,1)}return EventEmitter.prototype.emit.apply(this,arguments)};Promise.prototype.complete=function(){var a=util.args(arguments);return this.emit.apply(this,["complete"].concat(a))};Promise.prototype.error=function(a){if(!(a instanceof Error)){a=new Error(a)}return this.emit("err",a)};Promise.prototype.addCallback=function(a){return this.on("complete",a)};Promise.prototype.addErrback=function(a){return this.on("err",a)};Promise.prototype.addBack=function(a){this.on("err",function(b){a.call(this,b)});this.on("complete",function(){var b=util.args(arguments);a.apply(this,[null].concat(b))});return this};Promise.prototype.resolve=function(a,b){if(a){return this.error(a)}return this.complete(b)};
/*
 * Module exports.
 */
module.exports=Promise;