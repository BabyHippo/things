var Query=require("./query");function NamedScope(){}NamedScope.prototype.query;NamedScope.prototype.where=function(){var a=this.query||(this.query=new Query());a.where.apply(a,arguments);return a};NamedScope.prototype.decorate=function(e,b){var c=this.name,a=this.block,d=this.query;if(a){if(a.length===0){Object.defineProperty(e,c,{get:b.block0(a)})}else{e[c]=b.blockN(a)}}else{Object.defineProperty(e,c,{get:b.basic(d)})}};NamedScope.prototype.compile=function(c){var a=this.scopesByName,d;for(var b in a){d=a[b];d.decorate(c,{block0:function(e){return function(){var f=this._cumulativeQuery||(this._cumulativeQuery=new Query().bind(this));e.call(f);return this}},blockN:function(e){return function(){var f=this._cumulativeQuery||(this._cumulativeQuery=new Query().bind(this));e.apply(f,arguments);return this}},basic:function(e){return function(){var f=this._cumulativeQuery||(this._cumulativeQuery=new Query().bind(this));f.find(e);return this}}})}};module.exports=NamedScope;